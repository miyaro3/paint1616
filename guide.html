<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>MiRoDot - Setup Guide</title>
    <style>
        body { font-family: 'Helvetica Neue', Arial, sans-serif; line-height: 1.6; color: #e0e0e0; background: #121212; margin: 0; padding: 40px 20px; }
        .container { max-width: 900px; margin: 0 auto; background: #1e1e1e; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.5); }
        h1 { color: #9146ff; border-bottom: 2px solid #333; padding-bottom: 10px; text-align: center; margin-bottom: 30px; }
        h2 { color: #00ff7f; margin-top: 40px; border-left: 5px solid #00ff7f; padding-left: 15px; }
        
        .setup-section { background: #252525; padding: 25px; border-radius: 8px; margin: 20px 0; border: 1px solid #333; }
        input[type="text"] { width: 60%; padding: 12px; border-radius: 4px; border: 1px solid #444; background: #111; color: #fff; font-size: 16px; }
        
        .url-box { background: #000; padding: 15px; border-radius: 6px; margin-top: 15px; display: flex; align-items: center; justify-content: space-between; border: 1px solid #444; }
        .url-text { font-family: 'Courier New', monospace; color: #00ff7f; word-break: break-all; font-size: 14px; }
        
        button { padding: 10px 20px; cursor: pointer; border: none; border-radius: 4px; font-weight: bold; transition: 0.3s; }
        .btn-copy { background: #9146ff; color: white; margin-left: 10px; }
        .btn-copy:hover { background: #772ce8; }

        .command-table { width: 100%; border-collapse: collapse; margin-top: 10px; background: #252525; }
        .command-table th, .command-table td { border: 1px solid #444; padding: 12px; text-align: left; }
        .command-table th { background: #333; color: #9146ff; }
        code { background: #000; color: #ff79c6; padding: 2px 6px; border-radius: 4px; font-family: monospace; }

        .obs-list { background: #1a2a3a; padding: 20px; border-radius: 8px; border-left: 5px solid #3498db; }
        .tag-request { background: #3a1a3a; padding: 20px; border-radius: 8px; border-left: 5px solid #9146ff; margin: 30px 0; text-align: center; }
        .note { color: #ffa500; font-size: 0.9em; margin-top: 5px; }
        .important { color: #ff4444; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1>MiRoDot Setup Guide</h1>

    <div class="setup-section">
        <h3>1. TwitchチャンネルIDを入力</h3>
        <p>あなたのTwitch IDを入力すると、以下のURLが自動更新されます。</p>
        <input type="text" id="channelInput" placeholder="例: your_id" oninput="generateURLs()">
    </div>

    <h2>連携用URL</h2>
    
    <p><strong>【OBS用】表示オーバーレイ URL</strong><br><small>OBSの「ブラウザソース」に追加してください。</small></p>
    <div class="url-box">
        <span class="url-text" id="showURL">https://your-username.github.io/miro-dot/show.html?channel=</span>
        <button class="btn-copy" onclick="copyText('showURL')">コピー</button>
    </div>

    <p><strong>【リスナー用】描画用エディタ URL</strong><br><small>配信概要欄や、チャットボット（!paint 等）に登録してください。</small></p>
    <div class="url-box">
        <span class="url-text" id="editURL">https://your-username.github.io/miro-dot/paint.html</span>
        <button class="btn-copy" onclick="copyText('editURL')">コピー</button>
    </div>

    <h2>リスナー向けコマンド</h2>
    <p>描画されたドット絵は通常時、画面下端（または上端）をループ移動します。エフェクトは5秒間継続します。</p>
    <table class="command-table">
        <tr><th>コマンド</th><th>内容</th></tr>
        <tr><td><code>!draw [コード]</code></td><td>ドット絵を生成します。最初の1周は跳ねながら登場します。</td></tr>
        <tr><td><code>!shake</code></td><td>5秒間、絵をガタガタ揺らします。</td></tr>
        <tr><td><code>!jump</code></td><td>5秒間、絵をぴょんぴょん跳ねさせます。</td></tr>
        <tr><td><code>!dance</code></td><td>5秒間、絵を楽しくダンスさせます。</td></tr>
        <tr><td><code>!sparkle</code></td><td>5秒間、キラキラエフェクトを表示します。</td></tr>
        <tr><td><code>!bomb</code></td><td>5秒間、爆発するように激しく点滅させます。</td></tr>
    </table>

    <h2>管理コマンド（配信者・モデレーター専用）</h2>
    <table class="command-table">
        <tr><th>コマンド</th><th>対象者</th><th>内容</th></tr>
        <tr><td><code>!end</code></td><td>配信者/MOD</td><td>エンドロールを開始。全作品を整列させ下から上へスクロールします。</td></tr>
        <tr><td><code>!notend</code></td><td>配信者/MOD</td><td>エンドロールを終了し、通常のパレードに戻ります。</td></tr>
        <tr><td><code>!head</code></td><td>配信者/MOD</td><td>パレード位置を画面上端（頭上）に変更します。</td></tr>
        <tr><td><code>!foot</code></td><td>配信者/MOD</td><td>パレード位置を画面下端（足元）に戻します。</td></tr>
        <tr><td><code>!star</code></td><td>配信者/MOD</td><td>現在表示されている全作品のコピーが星のように画面を横切ります。</td></tr>
        <tr><td><code>!speed [数値]</code></td><td>配信者/MOD</td><td>パレードの流れる速度を変更します。</td></tr>
        <tr><td><code>!picclear [名前]</code></td><td>配信者/MOD</td><td>指定ユーザー（Twitch名）の絵をすべて消去します。</td></tr>
        <tr><td><code>!picban [名前]</code></td><td>配信者/MOD</td><td>指定ユーザーの絵を消去し、以降の投稿を禁止します。</td></tr>
    </table>

    <div class="tag-request">
        <p> <strong>お願い：</strong>Twitchタグへ <code>MiRoDot</code> を追加して頂けると嬉しいです。(無くても大丈夫です！)</p>
    </div>

    <h2>OBS 推奨設定</h2>
    <div class="obs-list">
        <ul>
            <li><strong>ソース:</strong> ブラウザソース</li>
            <li><strong>URL:</strong> 上記の表示用URL</li>
            <li><strong>幅 (Width):</strong> <code style="color:white; background:#555;">852</code></li>
            <li><strong>高さ (Height):</strong> <code style="color:white; background:#555;">480</code></li>
            <li><strong>表示されていない時にソースをシャットダウン:</strong> <span class="important">チェックを外す</span>
                <div class="note">※チェックを入れると、投稿された絵やBANリスト、速度設定がすべてリセットされます。</div>
            </li>
        </ul>
    </div>
</div>

<script>
    function generateURLs() {
        const channel = document.getElementById('channelInput').value.trim() || '[your_id]';
        const baseUrl = window.location.href.split('guide.html')[0];
        document.getElementById('showURL').innerText = `${baseUrl}show.html?channel=${channel}`;
        document.getElementById('editURL').innerText = `${baseUrl}paint.html`;
    }

    function copyText(id) {
        const text = document.getElementById(id).innerText;
        navigator.clipboard.writeText(text).then(() => {
            const btn = event.target;
            const originalText = btn.innerText;
            btn.innerText = "コピーしました";
            btn.style.background = "#00ff7f";
            setTimeout(() => {
                btn.innerText = originalText;
                btn.style.background = "#9146ff";
            }, 1000);
        });
    }
    generateURLs();
</script>

</body>
</html>